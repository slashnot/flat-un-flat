{"version":3,"file":"flattenUnflatten.js","sources":["../src/flatten.ts","../src/unflatten.ts","../src/main.ts"],"sourcesContent":["import type { FlatObject, NestedObject } from './types';\r\n\r\nexport function flattenObject(obj: NestedObject, parentKey: string = '', flatObj: FlatObject = {}): FlatObject {\r\n    for (const key in obj) {\r\n        const newKey = parentKey ? `${parentKey}.${key}` : key;\r\n        if (typeof obj[key] === 'object' && obj[key] !== null) {\r\n            // Recursively flatten the object\r\n            flattenObject(obj[key], newKey, flatObj);\r\n        } else {\r\n            // Add non-object value to the flattened object\r\n            flatObj[newKey] = obj[key];\r\n        }\r\n    }\r\n    return flatObj;\r\n}\r\n\r\nexport function flattenObjectWithArray(obj: NestedObject, parentKey: string = '', flatObj: FlatObject = {}): FlatObject {\r\n    for (const key in obj) {\r\n        const newKey = parentKey ? `${parentKey}.${key}` : key;\r\n\r\n        if (Array.isArray(obj[key])) {\r\n            // Include arrays directly as values without flattening further.\r\n            flatObj[newKey] = obj[key];\r\n        } else if (typeof obj[key] === 'object' && obj[key] !== null) {\r\n            // Recursively flatten the object\r\n            flattenObjectWithArray(obj[key], newKey, flatObj);\r\n        } else {\r\n            // Add non-object values and non-array values to the flattened object.\r\n            flatObj[newKey] = obj[key];\r\n        }\r\n    }\r\n    return flatObj;\r\n}","import type { FlatObject, NestedObject } from './types';\r\n\r\nexport function unflattenObject(flatObj: FlatObject, separator: string = '.'): NestedObject {\r\n    const unflattened: NestedObject = {};\r\n\r\n    for (const key in flatObj) {\r\n        // Split the keys by '.' to get individual levels.\r\n        const path = key.split(separator);\r\n        let currentLevel: NestedObject = unflattened;\r\n\r\n        // Iterate over each level, creating nested objects as needed.\r\n        path.forEach((subKey, index) => {\r\n            if (index === path.length - 1) {\r\n                // Last segment: assign the value directly\r\n                currentLevel[subKey] = flatObj[key];\r\n            } else {\r\n                // Create an empty object for this key if it doesn't exist yet\r\n                if (!currentLevel[subKey]) {\r\n                    currentLevel[subKey] = {};\r\n                }\r\n                // Move to the next level in the nested structure\r\n                currentLevel = currentLevel[subKey];\r\n            }\r\n        });\r\n    }\r\n\r\n    return unflattened;\r\n}","import { flattenObjectWithArray } from './flatten';\r\nimport { flattenObject as simpleFlattenObject } from './flatten';\r\nimport type { NestedObject, FlatObject } from './types';\r\n\r\nexport const flattenObject = (object: NestedObject, options = { preserveArrays: false }): FlatObject => {\r\n    const { preserveArrays } = options;\r\n\r\n    if (preserveArrays) {\r\n        return flattenObjectWithArray(object);\r\n    } else {\r\n        return simpleFlattenObject(object);\r\n    }\r\n}\r\n\r\nexport { unflattenObject } from './unflatten';"],"names":["flattenObject","obj","parentKey","flatObj","key","newKey","flattenObjectWithArray","unflattenObject","separator","unflattened","path","currentLevel","subKey","index","object","options","preserveArrays","simpleFlattenObject"],"mappings":"AAEO,SAASA,EAAcC,GAAmBC,IAAoB,IAAIC,IAAsB,CAAA,GAAgB;AAC3G,aAAWC,KAAOH,GAAK;AACnB,UAAMI,IAASH,IAAY,GAAGA,CAAS,IAAIE,CAAG,KAAKA;AACnD,IAAI,OAAOH,EAAIG,CAAG,KAAM,YAAYH,EAAIG,CAAG,MAAM,OAE7CJ,EAAcC,EAAIG,CAAG,GAAGC,GAAQF,CAAO,IAGvCA,EAAQE,CAAM,IAAIJ,EAAIG,CAAG;AAAA,EAEjC;AACA,SAAOD;AACX;AAEO,SAASG,EAAuBL,GAAmBC,IAAoB,IAAIC,IAAsB,CAAA,GAAgB;AACpH,aAAWC,KAAOH,GAAK;AACnB,UAAMI,IAASH,IAAY,GAAGA,CAAS,IAAIE,CAAG,KAAKA;AAEnD,IAAI,MAAM,QAAQH,EAAIG,CAAG,CAAC,IAEtBD,EAAQE,CAAM,IAAIJ,EAAIG,CAAG,IAClB,OAAOH,EAAIG,CAAG,KAAM,YAAYH,EAAIG,CAAG,MAAM,OAEpDE,EAAuBL,EAAIG,CAAG,GAAGC,GAAQF,CAAO,IAGhDA,EAAQE,CAAM,IAAIJ,EAAIG,CAAG;AAAA,EAEjC;AACA,SAAOD;AACX;AC9BO,SAASI,EAAgBJ,GAAqBK,IAAoB,KAAmB;AACxF,QAAMC,IAA4B,CAAA;AAElC,aAAWL,KAAOD,GAAS;AAEvB,UAAMO,IAAON,EAAI,MAAMI,CAAS;AAChC,QAAIG,IAA6BF;AAGjC,IAAAC,EAAK,QAAQ,CAACE,GAAQC,MAAU;AAC5B,MAAIA,MAAUH,EAAK,SAAS,IAExBC,EAAaC,CAAM,IAAIT,EAAQC,CAAG,KAG7BO,EAAaC,CAAM,MACpBD,EAAaC,CAAM,IAAI,CAAA,IAG3BD,IAAeA,EAAaC,CAAM;AAAA,IAE1C,CAAC;AAAA,EACL;AAEA,SAAOH;AACX;ACvBO,MAAMT,IAAgB,CAACc,GAAsBC,IAAU,EAAE,gBAAgB,SAAwB;AACpG,QAAM,EAAE,gBAAAC,MAAmBD;AAE3B,SAAIC,IACOV,EAAuBQ,CAAM,IAE7BG,EAAoBH,CAAM;AAEzC;"}